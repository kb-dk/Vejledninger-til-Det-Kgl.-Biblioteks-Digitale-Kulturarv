
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Rens Flora Danica-datasættet &#8212; Vejledninger til Det Kgl. Biblioteks Digitale Kulturarv</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Rens Flora Danica-datasættet';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Visualisering af Flora Danicas rensede metadataset" href="Visualisering%20af%20Flora%20Danicas%20metadata.html" />
    <link rel="prev" title="Udforsk ADL datasættet" href="Udforsk%20ADL%20datas%C3%A6ttet.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/DKB logo expanded black RGB.png" class="logo__image only-light" alt="Vejledninger til Det Kgl. Biblioteks Digitale Kulturarv - Home"/>
    <script>document.write(`<img src="_static/DKB logo expanded black RGB.png" class="logo__image only-dark" alt="Vejledninger til Det Kgl. Biblioteks Digitale Kulturarv - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Vejledningsmateriale til Det Kgl. Biblioteks digitale kulturarv
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">ADL (Arkiv for Dansk Litteratur)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Udforsk%20ADL%20datas%C3%A6ttet.html">Udforsk ADL datasættet</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Flora Danica</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Rens Flora Danica-datasættet</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visualisering%20af%20Flora%20Danicas%20metadata.html">Visualisering af Flora Danicas rensede metadataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="%C3%86ndre%20st%C3%B8rrelsen%20p%C3%A5%20Flora%20Danicas%20tif%20filer.html">Ændre størrelsen på billeder</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/kb-dk/Vejledninger-til-Det-Kgl.-Biblioteks-Digitale-Kulturarv" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/kb-dk/Vejledninger-til-Det-Kgl.-Biblioteks-Digitale-Kulturarv/issues/new?title=Issue%20on%20page%20%2FRens Flora Danica-datasættet.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Rens Flora Danica-datasættet.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Rens Flora Danica-datasættet</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importer-bibliotekerne">Importer bibliotekerne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gor-metadataet-tidy">Gør metadataet “tidy”</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#omdob-kolonner">Omdøb kolonner</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tabel-nummer-tilfoj-information-om-tabelnummerne">Tabel nummer: tilføj information om tabelnummerne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonne-ophav">Kolonne: Ophav</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonne-issue-rens-den-og-tilfoj-en-ny-kolonne-kaldet-issue-st">Kolonne ‘issue’: Rens den og tilføj en ny kolonne kaldet ‘issue_st’</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonnenavn-taxonomic-group">Kolonnenavn: taxonomic_group</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uddrag-de-relevante-oplysninger-og-tilfoj-dem-til-en-ny-kolonne">Uddrag de relevante oplysninger og tilføj dem til en ny kolonne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonne-copyright-modificer-tekststreng">Kolonne copyright: modificer tekststreng</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonnenavn-note">Kolonnenavn: note</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#opret-et-del-datasaet-og-gem-det-som-en-csv-fil">Opret et “del-datasæt” og gem det som en CSV fil</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="rens-flora-danica-datasaettet">
<h1>Rens Flora Danica-datasættet<a class="headerlink" href="#rens-flora-danica-datasaettet" title="Link to this heading">#</a></h1>
<p>Flora Danica-datasættet indeholder metadata i en xlsx-fil og mere end 3000 tiff-filer. I notebooken renser og udforsker vi de tmetadatasæt, som er tilgængeligt i LOAR.</p>
<section id="importer-bibliotekerne">
<h2>Importer bibliotekerne<a class="headerlink" href="#importer-bibliotekerne" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="gor-metadataet-tidy">
<h2>Gør metadataet “tidy”<a class="headerlink" href="#gor-metadataet-tidy" title="Link to this heading">#</a></h2>
<p>Metadataet kommer fra en datadump fra biblioteket.</p>
<p>Selvom datasættet umiddelbart ser ud til at være velstruktureret, kan vi få mere ud af det, hvis vi rydder lidt op i datae.</p>
<p>Lad os tage et kig på data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Indlæs filen med Flora Danica metadata</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Indlæs data&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;mekuni_flora_danica_data/Index_FloraDanica.xlsx&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Færdig. Dataframens form: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Inspicer de første tre rækker data.&#39;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Indlæs data
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Færdig. Dataframens form: (3240, 10)
Inspicer de første tre rækker data.
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Record Name</th>
      <th>Titel</th>
      <th>Opstilling</th>
      <th>Lokalitet</th>
      <th>Ophav</th>
      <th>År</th>
      <th>Note</th>
      <th>Taxonomisk gruppe</th>
      <th>Hæfte</th>
      <th>Copyright</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>floradanica_0001.tif</td>
      <td>Rubus Chamaemorus Linn.</td>
      <td>Fol. Top. Bot. Danmark</td>
      <td>Danmark\nNorge</td>
      <td>Hornemann, Jens Wilken (6.3.1770-30.7.1841) bo...</td>
      <td>1761</td>
      <td>Flora Danica Hft. 1, Tab. 1\n\nFigur 1\nLatins...</td>
      <td>Digitale Samlinger: Digitale Samlinger: Billed...</td>
      <td>Digitale Samlinger: Billeder:Særudgivelser:Flo...</td>
      <td>Materialet er fri af ophavsret</td>
    </tr>
    <tr>
      <th>1</th>
      <td>floradanica_0002.tif</td>
      <td>Pedicularis lapponica L.</td>
      <td>Fol. Top. Bot. Danmark</td>
      <td>Danmark\nNorge</td>
      <td>Hornemann, Jens Wilken (6.3.1770-30.7.1841) bo...</td>
      <td>1761</td>
      <td>Flora Danica Hft. 1, Tab. 2\n\nFigur 1\nLatins...</td>
      <td>Digitale Samlinger: Digitale Samlinger: Billed...</td>
      <td>Digitale Samlinger: Billeder:Særudgivelser:Flo...</td>
      <td>Materialet er fri af ophavsret</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="omdob-kolonner">
<h2>Omdøb kolonner<a class="headerlink" href="#omdob-kolonner" title="Link to this heading">#</a></h2>
<p>Navnene på kolonnerne er rodet. Vi har en blanding af engelsk og dansk. For at omdøbe kolonnerne i dataframen, mapper vi de gamle navne til nogle nye navne og omdøber derefter kolonnerne.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the mapping from old column names to new column names</span>
<span class="n">column_rename_mapping</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Record Name&quot;</span><span class="p">:</span> <span class="s2">&quot;record_name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Titel&quot;</span><span class="p">:</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Opstilling&quot;</span><span class="p">:</span> <span class="s2">&quot;placement&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Lokalitet&quot;</span><span class="p">:</span> <span class="s2">&quot;location&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ophav&quot;</span><span class="p">:</span> <span class="s2">&quot;author&quot;</span><span class="p">,</span>
    <span class="s2">&quot;År&quot;</span><span class="p">:</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Note&quot;</span><span class="p">:</span> <span class="s2">&quot;note&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Taxonomisk gruppe&quot;</span><span class="p">:</span> <span class="s2">&quot;taxonomic_group&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Hæfte&quot;</span><span class="p">:</span> <span class="s2">&quot;issue&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Copyright&quot;</span><span class="p">:</span> <span class="s2">&quot;copyright&quot;</span>
<span class="p">}</span>

<span class="c1"># Rename the columns using the mapping</span>
<span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">column_rename_mapping</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="tabel-nummer-tilfoj-information-om-tabelnummerne">
<h2>Tabel nummer: tilføj information om tabelnummerne<a class="headerlink" href="#tabel-nummer-tilfoj-information-om-tabelnummerne" title="Link to this heading">#</a></h2>
<p>Hvert billede i Flora Danica er markeret med et tabelnummer. Det er ofte øverst på billedet. Der er 3240 forskellige numre. Vi kan oprette en kolonne med tabelnumrene ved at tage indeksnumrene, der starter med 0, og tilføje én.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># modificer dataframen og tilføj kolonnen kaldet table_no  </span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;modificer dataframen og tilføj kolonnen kaldet table_no&#39;</span><span class="p">)</span>  
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="s1">&#39;table_no&#39;</span><span class="p">})</span>  
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;table_no&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;table_no&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>  
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>modificer dataframen og tilføj kolonnen kaldet table_no
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>table_no</th>
      <th>record_name</th>
      <th>title</th>
      <th>placement</th>
      <th>location</th>
      <th>author</th>
      <th>year</th>
      <th>note</th>
      <th>taxonomic_group</th>
      <th>issue</th>
      <th>copyright</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>floradanica_0001.tif</td>
      <td>Rubus Chamaemorus Linn.</td>
      <td>Fol. Top. Bot. Danmark</td>
      <td>Danmark\nNorge</td>
      <td>Hornemann, Jens Wilken (6.3.1770-30.7.1841) bo...</td>
      <td>1761</td>
      <td>Flora Danica Hft. 1, Tab. 1\n\nFigur 1\nLatins...</td>
      <td>Digitale Samlinger: Digitale Samlinger: Billed...</td>
      <td>Digitale Samlinger: Billeder:Særudgivelser:Flo...</td>
      <td>Materialet er fri af ophavsret</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>floradanica_0002.tif</td>
      <td>Pedicularis lapponica L.</td>
      <td>Fol. Top. Bot. Danmark</td>
      <td>Danmark\nNorge</td>
      <td>Hornemann, Jens Wilken (6.3.1770-30.7.1841) bo...</td>
      <td>1761</td>
      <td>Flora Danica Hft. 1, Tab. 2\n\nFigur 1\nLatins...</td>
      <td>Digitale Samlinger: Digitale Samlinger: Billed...</td>
      <td>Digitale Samlinger: Billeder:Særudgivelser:Flo...</td>
      <td>Materialet er fri af ophavsret</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="kolonne-ophav">
<h2>Kolonne: Ophav<a class="headerlink" href="#kolonne-ophav" title="Link to this heading">#</a></h2>
<p>Alle rækker i kolonnen “Ophav” indeholder den samme, identiske information, som er navnene og fødsels- og dødsdatoerne på flere af de botanikere, der har været ansvarlige for udgivelsesarbejdet.</p>
<p>Den ensartede information i ser således ud:</p>
<p><em>‘Hornemann, Jens Wilken (6.3.1770-30.7.1841) botaniker \nLange, Johan Martin Christian (20.3.1818-3.4.1898) botaniker \nLiebmann, Frederik Michael (10.10.1813-29.10.1856) botaniker \nMüller, Otto Frederik (2.3.1730-26.12.1784) botaniker \nOeder, Georg Christian (3.2.1728-28.1.1791) botaniker \nVahl, Martin (7.10.1749-24.12.1804) botaniker’</em></p>
<p>For at kunne sortere og filtrere datasættet baseret på oplysninger om ophav, har vi brug for detaljerede oplysninger om, hvilken forfatter der har været ansvarlig for udgivelsen af hvert billede. <em><a class="reference external" href="http://wayback-01.kb.dk/wayback/20101110095834/http://www2.kb.dk/udstillinger/floradanica/floradanica/editorer/oversigt.html">En sådan detaljeret oversigt kan findes på denne side</a></em></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Hæfte</p></th>
<th class="head"><p>Tavle nr.</p></th>
<th class="head"><p>År</p></th>
<th class="head"><p>Udgiver</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>1-60</p></td>
<td><p>1761</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>61-120</p></td>
<td><p>1763</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>121-180</p></td>
<td><p>1764</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>181-240</p></td>
<td><p>1765</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>241-300</p></td>
<td><p>1766</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>301-360</p></td>
<td><p>1767</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>361-420</p></td>
<td><p>1768</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>421-480</p></td>
<td><p>1769</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>481-540</p></td>
<td><p>1770</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>541-600</p></td>
<td><p>1771</p></td>
<td><p>G. C. Oeder</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>601-660</p></td>
<td><p>1775</p></td>
<td><p>O. F. Müller</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>661-720</p></td>
<td><p>1777</p></td>
<td><p>O. F. Müller</p></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>721-780</p></td>
<td><p>1778</p></td>
<td><p>O. F. Müller</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>781-840</p></td>
<td><p>1780</p></td>
<td><p>O. F. Müller</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>841-900</p></td>
<td><p>1782</p></td>
<td><p>O. F. Müller</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>901-960</p></td>
<td><p>1787</p></td>
<td><p>M. Vahl</p></td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td><p>961-1020</p></td>
<td><p>1790</p></td>
<td><p>M. Vahl</p></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td><p>1021-1080</p></td>
<td><p>1792</p></td>
<td><p>M. Vahl</p></td>
</tr>
<tr class="row-even"><td><p>19</p></td>
<td><p>1081-1140</p></td>
<td><p>1794</p></td>
<td><p>M. Vahl</p></td>
</tr>
<tr class="row-odd"><td><p>20</p></td>
<td><p>1141-1200</p></td>
<td><p>1797</p></td>
<td><p>M. Vahl</p></td>
</tr>
<tr class="row-even"><td><p>21</p></td>
<td><p>1201-1260</p></td>
<td><p>1799</p></td>
<td><p>M. Vahl</p></td>
</tr>
<tr class="row-odd"><td><p>22</p></td>
<td><p>1261-1320</p></td>
<td><p>1806</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>23</p></td>
<td><p>1321-1380</p></td>
<td><p>1808</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>24</p></td>
<td><p>1381-1440</p></td>
<td><p>1810</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>25</p></td>
<td><p>1441-1500</p></td>
<td><p>1813</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>26</p></td>
<td><p>1501-1560</p></td>
<td><p>1816</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>27</p></td>
<td><p>1561-1620</p></td>
<td><p>1818</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>28</p></td>
<td><p>1621-1680</p></td>
<td><p>1819</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>29</p></td>
<td><p>1681-1740</p></td>
<td><p>1821</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>30</p></td>
<td><p>1741-1800</p></td>
<td><p>1823</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>31</p></td>
<td><p>1801-1860</p></td>
<td><p>1825</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>32</p></td>
<td><p>1861-1920</p></td>
<td><p>1827</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>33</p></td>
<td><p>1921-1980</p></td>
<td><p>1829</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>34</p></td>
<td><p>1981-2040</p></td>
<td><p>1830</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>35</p></td>
<td><p>2041-2100</p></td>
<td><p>1832</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>36</p></td>
<td><p>2101-2160</p></td>
<td><p>1834</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>37</p></td>
<td><p>2161-2220</p></td>
<td><p>1836</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>38</p></td>
<td><p>2221-2280</p></td>
<td><p>1839</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-even"><td><p>39</p></td>
<td><p>2281-2340</p></td>
<td><p>1840</p></td>
<td><p>J. W. Hornemann</p></td>
</tr>
<tr class="row-odd"><td><p>40</p></td>
<td><p>2341-2400</p></td>
<td><p>1843</p></td>
<td><p>S. Drejer, J. F. Schouw &amp; J. Vahl</p></td>
</tr>
<tr class="row-even"><td><p>41</p></td>
<td><p>2401-2460</p></td>
<td><p>1845</p></td>
<td><p>F. Liebmann</p></td>
</tr>
<tr class="row-odd"><td><p>42</p></td>
<td><p>2461-2520</p></td>
<td><p>1849</p></td>
<td><p>F. Liebmann</p></td>
</tr>
<tr class="row-even"><td><p>43</p></td>
<td><p>2521-2580</p></td>
<td><p>1852</p></td>
<td><p>F. Liebmann</p></td>
</tr>
<tr class="row-odd"><td><p>44</p></td>
<td><p>2581-2640</p></td>
<td><p>1858</p></td>
<td><p>Japetus Steenstrup &amp; Johan Lange</p></td>
</tr>
<tr class="row-even"><td><p>45</p></td>
<td><p>2641-2700</p></td>
<td><p>1861</p></td>
<td><p>Johan Lange</p></td>
</tr>
<tr class="row-odd"><td><p>46</p></td>
<td><p>2701-2760</p></td>
<td><p>1867</p></td>
<td><p>Johan Lange</p></td>
</tr>
<tr class="row-even"><td><p>47</p></td>
<td><p>2761-2820</p></td>
<td><p>1869</p></td>
<td><p>Johan Lange</p></td>
</tr>
<tr class="row-odd"><td><p>48</p></td>
<td><p>2821-2880</p></td>
<td><p>1871</p></td>
<td><p>Johan Lange</p></td>
</tr>
<tr class="row-even"><td><p>49</p></td>
<td><p>2881-2940</p></td>
<td><p>1877</p></td>
<td><p>Johan Lange</p></td>
</tr>
<tr class="row-odd"><td><p>50</p></td>
<td><p>2940-3000</p></td>
<td><p>1880</p></td>
<td><p>Johan Lange</p></td>
</tr>
<tr class="row-even"><td><p>51</p></td>
<td><p>3001-3060</p></td>
<td><p>1883</p></td>
<td><p>Johan Lange</p></td>
</tr>
<tr class="row-odd"><td><p>Suppl 1</p></td>
<td><p>1-60</p></td>
<td><p>1853</p></td>
<td><p>F. Liebmann</p></td>
</tr>
<tr class="row-even"><td><p>Suppl 2</p></td>
<td><p>61-120</p></td>
<td><p>1865</p></td>
<td><p>Johan Lange</p></td>
</tr>
<tr class="row-odd"><td><p>Suppl 3</p></td>
<td><p>121-180</p></td>
<td><p>1874</p></td>
<td><p>Johan Lange</p></td>
</tr>
</tbody>
</table>
</div>
<p>Lad os tilføje oplysningerne om tabeller og forfattere til hver række i datasættet.</p>
<p>Bemærk, at de sidste tre linjer beskriver de 180 tabeller i tillægssiderne til Flora Danica.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Opret en ny dataframe med detaljeret information om, hvordan tabelnumre relaterer sig til forfatterudskrifter.</span>


<span class="c1"># Rå data string</span>
<span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">table_no</span><span class="se">\t</span><span class="s2">year</span><span class="se">\t</span><span class="s2">author</span>
<span class="s2">1-60 	1761 	G. C. Oeder</span>
<span class="s2">61-120 	1763 	G. C. Oeder</span>
<span class="s2">121-180 	1764 	G. C. Oeder</span>
<span class="s2">181-240 	1765 	G. C. Oeder</span>
<span class="s2">241-300 	1766 	G. C. Oeder</span>
<span class="s2">301-360 	1767 	G. C. Oeder</span>
<span class="s2">361-420 	1768 	G. C. Oeder</span>
<span class="s2">421-480 	1769 	G. C. Oeder</span>
<span class="s2">481-540 	1770 	G. C. Oeder</span>
<span class="s2">541-600 	1771 	G. C. Oeder</span>
<span class="s2">601-660 	1775 	O. F. Müller</span>
<span class="s2">661-720 	1777 	O. F. Müller</span>
<span class="s2">721-780 	1778 	O. F. Müller</span>
<span class="s2">781-840 	1780 	O. F. Müller</span>
<span class="s2">841-900 	1782 	O. F. Müller</span>
<span class="s2">901-960 	1787 	M. Vahl</span>
<span class="s2">961-1020 	1790 	M. Vahl</span>
<span class="s2">1021-1080 	1792 	M. Vahl</span>
<span class="s2">1081-1140 	1794 	M. Vahl</span>
<span class="s2">1141-1200 	1797 	M. Vahl</span>
<span class="s2">1201-1260 	1799 	M. Vahl</span>
<span class="s2">1261-1320 	1806 	J. W. Hornemann</span>
<span class="s2">1321-1380 	1808 	J. W. Hornemann</span>
<span class="s2">1381-1440 	1810 	J. W. Hornemann</span>
<span class="s2">1441-1500 	1813 	J. W. Hornemann</span>
<span class="s2">1501-1560 	1816 	J. W. Hornemann</span>
<span class="s2">1561-1620 	1818 	J. W. Hornemann</span>
<span class="s2">1621-1680 	1819 	J. W. Hornemann</span>
<span class="s2">1681-1740 	1821 	J. W. Hornemann</span>
<span class="s2">1741-1800 	1823 	J. W. Hornemann</span>
<span class="s2">1801-1860 	1825 	J. W. Hornemann</span>
<span class="s2">1861-1920 	1827 	J. W. Hornemann</span>
<span class="s2">1921-1980 	1829 	J. W. Hornemann</span>
<span class="s2">1981-2040 	1830 	J. W. Hornemann</span>
<span class="s2">2041-2100 	1832 	J. W. Hornemann</span>
<span class="s2">2101-2160 	1834 	J. W. Hornemann</span>
<span class="s2">2161-2220 	1836 	J. W. Hornemann</span>
<span class="s2">2221-2280 	1839 	J. W. Hornemann</span>
<span class="s2">2281-2340 	1840 	J. W. Hornemann</span>
<span class="s2">2341-2400 	1843 	S. Drejer, J. F. Schouw &amp; J. Vahl</span>
<span class="s2">2401-2460 	1845 	F. Liebmann</span>
<span class="s2">2461-2520 	1849 	F. Liebmann</span>
<span class="s2">2521-2580 	1852 	F. Liebmann</span>
<span class="s2">2581-2640 	1858 	Japetus Steenstrup &amp; Johan Lange</span>
<span class="s2">2641-2700 	1861 	Johan Lange</span>
<span class="s2">2701-2760 	1867 	Johan Lange</span>
<span class="s2">2761-2820 	1869 	Johan Lange</span>
<span class="s2">2821-2880 	1871 	Johan Lange</span>
<span class="s2">2881-2940 	1877 	Johan Lange</span>
<span class="s2">2940-3000 	1880 	Johan Lange</span>
<span class="s2">3001-3060 	1883 	Johan Lange</span>
<span class="s2">3060-3119 	1853 	F. Liebmann</span>
<span class="s2">3120-3179 	1865 	Johan Lange</span>
<span class="s2">3180-3240 	1874 	Johan Lange</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># Opdel data i linjer og del hver linje i kolonner</span>
<span class="n">lines</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">columns</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Ekstraher data</span>
<span class="n">data_rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s{2,}&#39;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>  <span class="c1"># Opret dataframes med detaljeret info</span>
<span class="n">detailed_info</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_rows</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Sørg for, at &#39;table_no&#39; behandles som en streng</span>
<span class="n">detailed_info</span><span class="p">[</span><span class="s1">&#39;table_no&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">detailed_info</span><span class="p">[</span><span class="s1">&#39;table_no&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

<span class="c1"># Liste til at gemme nye dataframes</span>
<span class="n">new_dfs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Gennemgå hver række i dataframen</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">detailed_info</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="c1"># Parse intervallet</span>
    <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;table_no&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
    
    <span class="c1"># Opret indeksinterval</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    
    <span class="c1"># Opret et nyt dataframe</span>
    <span class="n">new_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;table_no&#39;</span><span class="p">:</span> <span class="n">indices</span><span class="p">,</span>
        <span class="s1">&#39;author_st&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
    <span class="p">})</span>
    
    <span class="c1"># Tilføj til listen</span>
    <span class="n">new_dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_df</span><span class="p">)</span>

<span class="c1"># Nu indeholder new_dfs alle de nye dataframes</span>
<span class="c1"># og de kan sammenføjes til ét stort dataframe</span>
<span class="n">detailed_info_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">new_dfs</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Nye data om &quot;author&quot; er tilføjet til kolonnen &quot;author_st&quot;.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1"># Kombiner datasæt</span>
<span class="n">df_w_year_author</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">detailed_info_df</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;table_no&#39;</span><span class="p">)</span>
<span class="n">df_w_year_author</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Nye data om &quot;author&quot; er tilføjet til kolonnen &quot;author_st&quot;.
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>table_no</th>
      <th>record_name</th>
      <th>title</th>
      <th>placement</th>
      <th>location</th>
      <th>author</th>
      <th>year</th>
      <th>note</th>
      <th>taxonomic_group</th>
      <th>issue</th>
      <th>copyright</th>
      <th>author_st</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>floradanica_0001.tif</td>
      <td>Rubus Chamaemorus Linn.</td>
      <td>Fol. Top. Bot. Danmark</td>
      <td>Danmark\nNorge</td>
      <td>Hornemann, Jens Wilken (6.3.1770-30.7.1841) bo...</td>
      <td>1761</td>
      <td>Flora Danica Hft. 1, Tab. 1\n\nFigur 1\nLatins...</td>
      <td>Digitale Samlinger: Digitale Samlinger: Billed...</td>
      <td>Digitale Samlinger: Billeder:Særudgivelser:Flo...</td>
      <td>Materialet er fri af ophavsret</td>
      <td>G. C. Oeder</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>floradanica_0002.tif</td>
      <td>Pedicularis lapponica L.</td>
      <td>Fol. Top. Bot. Danmark</td>
      <td>Danmark\nNorge</td>
      <td>Hornemann, Jens Wilken (6.3.1770-30.7.1841) bo...</td>
      <td>1761</td>
      <td>Flora Danica Hft. 1, Tab. 2\n\nFigur 1\nLatins...</td>
      <td>Digitale Samlinger: Digitale Samlinger: Billed...</td>
      <td>Digitale Samlinger: Billeder:Særudgivelser:Flo...</td>
      <td>Materialet er fri af ophavsret</td>
      <td>G. C. Oeder</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="kolonne-issue-rens-den-og-tilfoj-en-ny-kolonne-kaldet-issue-st">
<h2>Kolonne ‘issue’: Rens den og tilføj en ny kolonne kaldet ‘issue_st’<a class="headerlink" href="#kolonne-issue-rens-den-og-tilfoj-en-ny-kolonne-kaldet-issue-st" title="Link to this heading">#</a></h2>
<p>Rækkerne i kolonnen ‘issue’ indeholder denne lange streng: <em>Digitale Samlinger: Billeder:Særudgivelser:Flora Danica:Hæfte:</em> .</p>
<p>Strengen er en sti, der angiver placeringen i de Digitale Samlinger. Vi har ikke brug for informationen om stien. De data, vi virkelig har brug for, er dem, der er tilbage, når vi fjerner den lange streng.</p>
<p>Vi kan få dem ved at rense strengen, og det gør vi ved at erstatte den lange streng med ingenting. Vi gør det ved at skrive en funktion kaldet <em>clean_issue</em> og bruge den indbyggede Python-metode .replace(). Vi anvender derefter funktionen på kolonnen ‘issue’ og tilføjer dataene til dataframen i en ny kolonne kaldet <em>issue_st</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">df_w_year_author</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;issue&#39;</span><span class="p">])</span>

<span class="n">long_string</span> <span class="o">=</span> <span class="n">df_w_year_author</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;issue&#39;</span><span class="p">]</span>

<span class="n">clean_string</span> <span class="o">=</span> <span class="n">long_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Digitale Samlinger: Billeder:Særudgivelser:Flora Danica:Hæfte:&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">clean_string</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Digitale Samlinger: Billeder:Særudgivelser:Flora Danica:Hæfte:Hft.  1
Hft.  1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">clean_issue</span><span class="p">(</span><span class="n">text_string_in</span><span class="p">):</span>
    <span class="n">text_string_out</span> <span class="o">=</span> <span class="n">text_string_in</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Digitale Samlinger: Billeder:Særudgivelser:Flora Danica:Hæfte:&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">text_string_out</span>


<span class="n">df_w_year_author</span><span class="p">[</span><span class="s1">&#39;issue_st&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_w_year_author</span><span class="p">[</span><span class="s1">&#39;issue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">clean_issue</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="n">df_w_year_author</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>table_no</th>
      <th>record_name</th>
      <th>title</th>
      <th>placement</th>
      <th>location</th>
      <th>author</th>
      <th>year</th>
      <th>note</th>
      <th>taxonomic_group</th>
      <th>issue</th>
      <th>copyright</th>
      <th>author_st</th>
      <th>issue_st</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>floradanica_0001.tif</td>
      <td>Rubus Chamaemorus Linn.</td>
      <td>Fol. Top. Bot. Danmark</td>
      <td>Danmark\nNorge</td>
      <td>Hornemann, Jens Wilken (6.3.1770-30.7.1841) bo...</td>
      <td>1761</td>
      <td>Flora Danica Hft. 1, Tab. 1\n\nFigur 1\nLatins...</td>
      <td>Digitale Samlinger: Digitale Samlinger: Billed...</td>
      <td>Digitale Samlinger: Billeder:Særudgivelser:Flo...</td>
      <td>Materialet er fri af ophavsret</td>
      <td>G. C. Oeder</td>
      <td>Hft.  1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>floradanica_0002.tif</td>
      <td>Pedicularis lapponica L.</td>
      <td>Fol. Top. Bot. Danmark</td>
      <td>Danmark\nNorge</td>
      <td>Hornemann, Jens Wilken (6.3.1770-30.7.1841) bo...</td>
      <td>1761</td>
      <td>Flora Danica Hft. 1, Tab. 2\n\nFigur 1\nLatins...</td>
      <td>Digitale Samlinger: Digitale Samlinger: Billed...</td>
      <td>Digitale Samlinger: Billeder:Særudgivelser:Flo...</td>
      <td>Materialet er fri af ophavsret</td>
      <td>G. C. Oeder</td>
      <td>Hft.  1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="kolonnenavn-taxonomic-group">
<h2>Kolonnenavn: taxonomic_group<a class="headerlink" href="#kolonnenavn-taxonomic-group" title="Link to this heading">#</a></h2>
<p>Værdierne i kolonnen er lidt rodede.</p>
<p>De indeholder både oplysninger om navnet på samlingen og oplysninger om den taksonomiske gruppe, som planten på billedet tilhører.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_w_year_author</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;taxonomic_group&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Digitale Samlinger: Digitale Samlinger: Billeder:Særudgivelser:Flora Danica:Taxonomisk gruppe:Karplanter&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="uddrag-de-relevante-oplysninger-og-tilfoj-dem-til-en-ny-kolonne">
<h2>Uddrag de relevante oplysninger og tilføj dem til en ny kolonne<a class="headerlink" href="#uddrag-de-relevante-oplysninger-og-tilfoj-dem-til-en-ny-kolonne" title="Link to this heading">#</a></h2>
<p>Den egentlige information om taksonomi ville være “Karplanter”, mens resten af tekststrengen kan betragtes som støj.</p>
<p>Lad os prøve at udtrække de relevante data og tilføje dem til en ny kolonne.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tilgå en enkelt værdi</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">df_w_year_author</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;taxonomic_group&#39;</span><span class="p">]</span>
<span class="c1"># Split på &#39;:&#39; og tag listens sidste element (den information som vi egentlig ønsker)</span>
<span class="n">group_val</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">group_val</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Karplanter&#39;
</pre></div>
</div>
</div>
</div>
<p>Nu skriver vi en funktion og benytter den til at dataene og tilføje dem til en ny kolonne. Når vi inspicerer datasættet, ser det umiddelbart ud til, at de fleste planter tilhører taksonomigruppen “Karplanter”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_taxonomy_data</span><span class="p">(</span><span class="n">S</span><span class="p">):</span>
    <span class="n">group_val</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">group_val</span>


<span class="n">df_w_year_author</span><span class="p">[</span><span class="s1">&#39;taxonomic_group_st&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_w_year_author</span><span class="p">[</span><span class="s1">&#39;taxonomic_group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">get_taxonomy_data</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1"># Inspiser data i en den ny kolonne</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">df_w_year_author</span><span class="p">[</span><span class="s1">&#39;taxonomic_group_st&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>taxonomic_group_st
Karplanter           2073
Svampe                391
Mosser                331
Alger                 228
Laver                 163
Slimsvampe             39
Ukendt                 15
Taxonomisk gruppe       1
Lave                    1
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
</section>
<section id="kolonne-copyright-modificer-tekststreng">
<h2>Kolonne copyright: modificer tekststreng<a class="headerlink" href="#kolonne-copyright-modificer-tekststreng" title="Link to this heading">#</a></h2>
<p>Værdierne i kolonnen “copyright” alle sammen de samme. De består af en tekststreng, hvor der står “Materialet er fri af ophavsret”.</p>
<p>Lad os ændrer teksten til det kortere “fri”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">df_w_year_author</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;copyright&#39;</span><span class="p">])</span>

<span class="n">text_string</span> <span class="o">=</span> <span class="n">df_w_year_author</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;copyright&#39;</span><span class="p">]</span>
<span class="n">new_text_string</span> <span class="o">=</span> <span class="n">text_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Materialet er fri af ophavsret&#39;</span><span class="p">,</span> <span class="s1">&#39;fri&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">new_text_string</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Materialet er fri af ophavsret
fri
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">clean_copyright</span><span class="p">(</span><span class="n">S</span><span class="p">):</span>
    <span class="n">new_text_string</span>  <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Materialet er fri af ophavsret&#39;</span><span class="p">,</span> <span class="s1">&#39;free&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_text_string</span>


<span class="n">df_w_year_author</span><span class="p">[</span><span class="s1">&#39;copyright&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_w_year_author</span><span class="p">[</span><span class="s1">&#39;copyright&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">clean_copyright</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="kolonnenavn-note">
<h2>Kolonnenavn: note<a class="headerlink" href="#kolonnenavn-note" title="Link to this heading">#</a></h2>
<p>Værdierne i datasættets andre kolonner har også flere værdier i andre kolonner. For eksempel i kolonnen ‘note’. Lad os se nærmere på værdierne i den første række af denne kolonne.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Note:</span><span class="se">\n</span><span class="si">{</span><span class="n">df_w_year_author</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;note&quot;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note:
Flora Danica Hft. 1, Tab. 1

Figur 1
Latinsk navn: Rubus chamaemorus L.
Dansk slægtsnavn: Multebær
Dansk familienavn: Rosenfamilien
Latinsk familienavn: Rosaceae
</pre></div>
</div>
</div>
</div>
<p>Nedenfor bliver der læst data fra ‘Note’ kolonnen, og ved hjælp af regulære udtryk bliver der søgt efter specifikke oplysninger, nemlig det latinske familienavn, det latinske navn og lange nomenklatur. Funktionen <code class="docutils literal notranslate"><span class="pre">parse_notes</span></code> udtrækker dataen, og resultatet tilføjes som nye kolonner til den oprindelige DataFrame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Funktion der finder de relevant data fra værdierne i kolonnen &#39;note&#39; </span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Find relevant data i værdierne i kolonnen &quot;note&quot;&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">parse_notes</span><span class="p">(</span><span class="n">note</span><span class="p">):</span>
    <span class="c1"># Start med default værdier</span>
    <span class="n">latinsk_familienavn</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">latinsk_navn</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">lange_nomenklator</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Regular udtryk, der finder relevant information</span>
    <span class="n">latinsk_familienavn_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Latinsk familienavn:\s*(.*)&#39;</span>
    <span class="n">latinsk_navn_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Latinsk navn:\s*(.*)&#39;</span>
    <span class="n">lange_nomenklator_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Lange nomenklator:\s*(.*)&#39;</span>

    <span class="c1"># Søg efter relevant information</span>
    <span class="n">latinsk_familienavn_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">latinsk_familienavn_pattern</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">latinsk_familienavn_match</span><span class="p">:</span>
        <span class="n">latinsk_familienavn</span> <span class="o">=</span> <span class="n">latinsk_familienavn_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="n">latinsk_navn_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">latinsk_navn_pattern</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">latinsk_navn_match</span><span class="p">:</span>
        <span class="n">latinsk_navn</span> <span class="o">=</span> <span class="n">latinsk_navn_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="n">lange_nomenklator_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">lange_nomenklator_pattern</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">lange_nomenklator_match</span><span class="p">:</span>
        <span class="n">lange_nomenklator</span> <span class="o">=</span> <span class="n">lange_nomenklator_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="c1"># Kombiner Latinsk navn and Lange nomenklator</span>
    <span class="n">combined_latinsk_navn</span> <span class="o">=</span> <span class="n">latinsk_navn</span> <span class="k">if</span> <span class="n">latinsk_navn</span> <span class="o">!=</span> <span class="s1">&#39;-&#39;</span> <span class="k">else</span> <span class="n">lange_nomenklator</span>

    <span class="k">return</span> <span class="n">latinsk_familienavn</span><span class="p">,</span> <span class="n">combined_latinsk_navn</span>

<span class="c1"># Applicer funktionen til dataframen</span>
<span class="n">parsed_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">parse_notes</span><span class="p">)</span>
<span class="n">df_parsed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">parsed_data</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;latin_family_name&#39;</span><span class="p">,</span> <span class="s1">&#39;latin_name&#39;</span><span class="p">])</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Færdig&#39;</span><span class="p">)</span>

<span class="c1"># Saml data i &quot;Note&quot; kolonnen til en dataframe</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Sammenkæd dataen med den oprindelige dataframe&#39;</span><span class="p">)</span>
<span class="n">concat_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_w_year_author</span><span class="p">,</span><span class="n">df_parsed</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Færdig. Dataframens form: </span><span class="si">{</span><span class="n">concat_df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Find relevant data i værdierne i kolonnen &quot;note&quot;
Færdig
Sammenkæd dataen med den oprindelige dataframe
Færdig. Dataframens form: (3242, 16)
</pre></div>
</div>
</div>
</div>
</section>
<section id="opret-et-del-datasaet-og-gem-det-som-en-csv-fil">
<h2>Opret et “del-datasæt” og gem det som en CSV fil<a class="headerlink" href="#opret-et-del-datasaet-og-gem-det-som-en-csv-fil" title="Link to this heading">#</a></h2>
<p>Datasættet er renere og mere velorganiseret end før.</p>
<p>Det er lettere for os at bruge det til analyse og visualiseringer.</p>
<p>Dog er det kun nogle af kolonnerne, vi behøver i det videre arbejde. Derfor udvælger jeg nogle af kolonnerne til mit “del-datasæt”, som jeg gemmer, som en CSV-fil.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">subset_df</span> <span class="o">=</span> <span class="n">concat_df</span><span class="p">[[</span><span class="s1">&#39;table_no&#39;</span><span class="p">,</span> <span class="s1">&#39;record_name&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;author_st&#39;</span><span class="p">,</span> <span class="s1">&#39;taxonomic_group_st&#39;</span><span class="p">,</span> <span class="s1">&#39;issue&#39;</span><span class="p">,</span> <span class="s1">&#39;latin_family_name&#39;</span><span class="p">,</span> <span class="s1">&#39;latin_name&#39;</span><span class="p">,</span> <span class="s1">&#39;copyright&#39;</span><span class="p">]]</span>
<span class="n">subset_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.\mekuni_flora_danica_data\flora_danica_tidy_format.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Udforsk%20ADL%20datas%C3%A6ttet.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Udforsk ADL datasættet</p>
      </div>
    </a>
    <a class="right-next"
       href="Visualisering%20af%20Flora%20Danicas%20metadata.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Visualisering af Flora Danicas rensede metadataset</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importer-bibliotekerne">Importer bibliotekerne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gor-metadataet-tidy">Gør metadataet “tidy”</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#omdob-kolonner">Omdøb kolonner</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tabel-nummer-tilfoj-information-om-tabelnummerne">Tabel nummer: tilføj information om tabelnummerne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonne-ophav">Kolonne: Ophav</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonne-issue-rens-den-og-tilfoj-en-ny-kolonne-kaldet-issue-st">Kolonne ‘issue’: Rens den og tilføj en ny kolonne kaldet ‘issue_st’</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonnenavn-taxonomic-group">Kolonnenavn: taxonomic_group</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uddrag-de-relevante-oplysninger-og-tilfoj-dem-til-en-ny-kolonne">Uddrag de relevante oplysninger og tilføj dem til en ny kolonne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonne-copyright-modificer-tekststreng">Kolonne copyright: modificer tekststreng</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kolonnenavn-note">Kolonnenavn: note</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#opret-et-del-datasaet-og-gem-det-som-en-csv-fil">Opret et “del-datasæt” og gem det som en CSV fil</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Det Kgl. Bibliotek
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>